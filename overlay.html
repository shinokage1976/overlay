<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">

<style>
/* ===== FONTE ===== */
@font-face {
  font-family: "Cascadia";
  src: local("Cascadia Code");
}

body {
  margin: 0;
  background: transparent;
  font-family: "Cascadia", monospace;
}

/* ===== CARD ===== */
.card {
  width: 520px;
  height: 180px;
  display: flex;
  background: rgba(0,0,0,0.65);
  border-radius: 10px;
  overflow: hidden;
}

/* ===== PORTRAIT ===== */
.portrait-box {
  width: 160px;
  position: relative;
}

.portrait-box img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* ===== INFO ===== */
.info {
  flex: 1;
  padding: 12px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

/* ===== STROKES ===== */
.stroke-red {
  color: white;
  text-shadow:
    -2px -2px 0 red,
     2px -2px 0 red,
    -2px  2px 0 red,
     2px  2px 0 red,
     0 0 12px red;
}

.stroke-blue {
  color: white;
  text-shadow:
    -2px -2px 0 #3fa9ff,
     2px -2px 0 #3fa9ff,
    -2px  2px 0 #3fa9ff,
     2px  2px 0 #3fa9ff,
     0 0 12px #3fa9ff;
}

/* ===== NAME ===== */
.name {
  font-size: 34px;
  line-height: 1;
}

.name.buff {
  color: black;
  text-shadow:
    -2px -2px 0 red,
     2px -2px 0 red,
    -2px  2px 0 red,
     2px  2px 0 red,
     0 0 14px red;
}

/* ===== PV / PD ===== */
.pv {
  font-size: 48px;
  font-weight: bold;
}

.pd {
  position: absolute;
  bottom: 10px;
  left: 10px;
  font-size: 20px;
}

/* ===== CONTROLO ===== */
.controls {
  position: fixed;
  bottom: 10px;
  left: 10px;
}

button {
  font-family: "Cascadia", monospace;
  font-size: 14px;
  padding: 6px 12px;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="card">
  <div class="portrait-box">
    <img id="portrait">
    <div class="pd stroke-blue">PD <span id="pd"></span></div>
  </div>

  <div class="info">
    <div class="name stroke-red" id="name"></div>
    <div class="pv stroke-red" id="pv"></div>
  </div>
</div>

<!-- CONTROLO -->
<div class="controls">
  <button onclick="toggleBuff()">ATIVAR / DESATIVAR BUFF</button>
</div>

<script>
/* ===== INIT ===== */
if (!localStorage.getItem("rpg")) {
  localStorage.setItem("rpg", JSON.stringify({
    pvBase: 52,
    pvMax: 52,
    pdBase: 52,
    buffAtivo: false,
    portrait: "normal.png"
  }));
}

/* ===== CONTROLE ===== */
function toggleBuff() {
  const data = JSON.parse(localStorage.getItem("rpg"));
  data.buffAtivo = !data.buffAtivo;
  data.portrait = data.buffAtivo ? "buff.png" : "normal.png";
  localStorage.setItem("rpg", JSON.stringify(data));
}

/* ===== OVERLAY UPDATE ===== */
setInterval(() => {
  const data = JSON.parse(localStorage.getItem("rpg"));
  if (!data) return;

  const buff = data.buffAtivo;

  const pvAtual = data.pvBase + (buff ? 20 : 0);
  const pdAtual = data.pdBase + (buff ? 10 : 0);

  const nameEl = document.getElementById("name");
  if (buff) {
    nameEl.innerText = "Escarlate";
    nameEl.classList.add("buff");
  } else {
    nameEl.innerText = "Mila";
    nameEl.classList.remove("buff");
  }

  document.getElementById("pv").innerText = pvAtual + "/" + data.pvMax;
  document.getElementById("pd").innerText = pdAtual;

  // Para funcionar no GitHub Pages
  document.getElementById("portrait").src =
    "https://shinokage1976.github.io/overlay/portraits/" + data.portrait;

}, 200);
</script>

</body>
</html>
